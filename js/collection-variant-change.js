let previousDataSrc="",previousDataUrl="",previousDataBadge="",clickedDataSrc="",clickedDataUrl="",clickedDataBadge="";function handleImageHover(event){const{dataSrc,dataUrl,dataBadge}=getImageAttributes(event),cardInner=event.target.closest(".card");previousDataSrc=cardInner.querySelector("img").src,previousDataUrl=cardInner.querySelector("a").href;const previousBadge=cardInner.querySelector(".badge.badge--product");previousBadge&&(previousDataBadge=previousBadge.textContent),dataSrc&&dataUrl&&updateCardMedia(event,dataSrc,dataUrl,dataBadge)}function handleImageClick(event){const{dataSrc,dataUrl,dataBadge}=getImageAttributes(event);dataSrc&&dataUrl&&(updateCardMedia(event,dataSrc,dataUrl,dataBadge),clickedDataSrc=dataSrc,clickedDataUrl=dataUrl,clickedDataBadge=dataBadge);const liElement=event.target.closest(".variant-image");setActiveClass(liElement),previousDataSrc="",previousDataUrl="",previousDataBadge=""}function handleImageMouseOut(event){if(previousDataSrc&&previousDataUrl){const cardInner=event.target.closest(".card"),media=cardInner.querySelector("img"),badge=cardInner.querySelector(".badge.badge--product");media.src!==clickedDataSrc&&(media.src=previousDataSrc,cardInner.querySelector("a").href=previousDataUrl,badge&&(badge.textContent=previousDataBadge))}const liElement=event.target.closest(".variant-image");liElement.classList.contains("active")||liElement.classList.remove("active")}function setActiveClass(targetElement){const siblings=targetElement.parentElement.children;for(let sibling of siblings)sibling!==targetElement&&sibling.classList.remove("active");targetElement.classList.add("active")}function getImageAttributes(event){const img=event.target.querySelector("img");return img?{dataSrc:img.getAttribute("data-src"),dataUrl:img.getAttribute("data-url"),dataBadge:img.getAttribute("data-badge")}:{}}function updateCardMedia(event,dataSrc,dataUrl,dataBadge){const cardInner=event.target.closest(".card"),anchor=cardInner.querySelector("a"),media=cardInner.querySelector("img"),badge=cardInner.querySelector(".badge.badge--product");media.src=dataSrc,anchor.href=dataUrl,badge&&(badge.textContent=dataBadge)}function initializeVariantImageEvents(){document.querySelectorAll(".variant-image").forEach(function(image){image.addEventListener("mouseenter",handleImageHover),image.addEventListener("mouseleave",handleImageMouseOut),image.addEventListener("click",handleImageClick)}),document.querySelectorAll(".variant-image.active").forEach(function(activeVariantImage){activeVariantImage&&activeVariantImage.click()})}document.addEventListener("DOMContentLoaded",function(){getCollectionItemsCount(),initializeVariantImageEvents(),window.handleImageHover=handleImageHover,window.handleImageClick=handleImageClick,window.getCollectionItemsCount=getCollectionItemsCount});function ajaxinateCallBack(){initializeVariantImageEvents();for(var productList=document.getElementById("product-grid"),encounteredItems=new Map,directChildren=productList.children,i=directChildren.length-1;i>=0;i--){var item=directChildren[i],itemId=item.getAttribute("id");if(itemId){if(encounteredItems.has(itemId)){var previousItem=encounteredItems.get(itemId);previousItem.parentNode.removeChild(previousItem)}encounteredItems.set(itemId,item)}}const itemCount=encounteredItems.size;var countParagraph=document.getElementById("load-more__items-count");countParagraph&&(countParagraph.textContent=countParagraph.textContent.replace(/\d+/,itemCount))}function getCollectionItemsCount(){if(!window.collection_handle)return;const url=new URL(window.location.href),searchParams=new URLSearchParams(url.search),newUrl=`/collections/${collection_handle}?view=products-count&${searchParams.toString()}`;fetch(newUrl).then(response=>response.text()).then(text=>{const itemCount=text.split(`
`).filter(line=>line.trim().length>0).join(`
`);var countParagraphTop=document.getElementById("ProductCount");countParagraphTop.textContent=countParagraphTop.textContent.replace(/\d+/g,itemCount),countParagraphTop.style.display="block";var countParagraphNav=document.getElementById("load-more__items-count");if(countParagraphNav){let occurrenceCount=0;countParagraphNav.textContent=countParagraphNav.textContent.replace(/\d+/g,match=>(occurrenceCount++,occurrenceCount===2?itemCount:match))}}).catch(error=>console.error("Error fetching item count:",error))}function customBuildRedirect(productURL){var current_url=productURL;current_url.includes("?view=custom-watches")||(window.location.href=current_url+(current_url.includes("?")?"&":"?")+"view=custom-watches")}function facetsApplied(){const url=new URL(window.location.href),searchParams=new URLSearchParams(url.search);return url.searchParams.toString().length>0}
//# sourceMappingURL=/cdn/shop/t/748/assets/collection-variant-change.js.map?v=133098534299387369971735264036
