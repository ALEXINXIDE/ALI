document.addEventListener("DOMContentLoaded",function(){const selectors={slideshow:"[data-slideshow]",speed:500},sectionId='[data-section-type="product-slideshow"] .swiper-container';function showLoadingState(){document.querySelectorAll(".swiper-slide").forEach(slide=>{const spinner=slide.querySelector(".loading-spinner");spinner&&(spinner.style.display="block")})}function removeLoadingState(){document.querySelectorAll(".swiper-slide").forEach(slide=>{const spinner=slide.querySelector(".loading-spinner");spinner&&(spinner.style.display="none")})}function waitForElement(selector,callback,interval=100,timeout=1e4){const startTime=new Date().getTime(),checkExist=setInterval(()=>{const element=document.querySelector(selector),elapsed=new Date().getTime()-startTime;element?(clearInterval(checkExist),removeLoadingState(),callback()):elapsed>timeout&&(clearInterval(checkExist),console.error("Timeout: DY components did not load in time."))},interval)}showLoadingState(),waitForElement(sectionId,()=>{const slideshow=document.querySelector(selectors.slideshow),swiperOptions={loop:!0,observer:!0,threshold:8,speed:selectors.speed,slidesPerView:4,slidesPerGroup:1,spaceBetween:40,autoplay:{delay:5e3,disableOnInteraction:!1},navigation:{nextEl:document.querySelector(".arrow--right"),prevEl:document.querySelector(".arrow--left")},pagination:{el:".swiper-pagination",clickable:!0},breakpoints:{360:{slidesPerView:2,spaceBetween:20},550:{slidesPerView:2,spaceBetween:20},768:{slidesPerView:2,spaceBetween:30},992:{slidesPerView:4,spaceBetween:40}},watchSlidesVisibility:!0,keyboard:{enabled:!0,onlyInViewport:!0},on:{init:()=>{document.querySelectorAll(".swiper-slide").forEach(slide=>{slide.setAttribute("aria-hidden",!slide.classList.contains("swiper-slide-visible"))})}}},dySwiper=new Swiper(slideshow,swiperOptions);dySwiper.on("slideChange",()=>{document.querySelectorAll(".swiper-slide").forEach(slide=>{slide.setAttribute("aria-hidden",!slide.classList.contains("swiper-slide-visible"))})});const event=new Event("renderProductTiles");window.dispatchEvent(event),slideshow.setAttribute("tabindex",0),document.addEventListener("focusin",e=>{e.target.closest(".swiper-container")&&dySwiper.autoplay.stop()}),document.addEventListener("focusout",e=>{e.target.closest(".swiper-container")&&dySwiper.autoplay.start()});const originalToggleButton=slideshow.querySelector(".play-pause-toggle");if(originalToggleButton){const toggleButton=originalToggleButton.cloneNode(!0);toggleButton.setAttribute("aria-label","carousel pause / resume"),toggleButton.setAttribute("tabindex","0"),toggleButton.classList.add("play"),originalToggleButton.remove(),slideshow.querySelector(".swiper-pagination").prepend(toggleButton),toggleButton.addEventListener("click",()=>{toggleButton.classList.contains("play")?(toggleButton.classList.remove("play"),toggleButton.classList.add("pause"),dySwiper.autoplay.stop()):(toggleButton.classList.remove("pause"),toggleButton.classList.add("play"),dySwiper.autoplay.start())})}},100,1e4),window.addEventListener("renderProductTiles",function(e){renderProductTiles(e.detail)})});function renderProductTiles(){Array.from(document.querySelectorAll("[data-product-card]")).filter(el=>el.dataset.productCard).forEach(el=>{const url=el.dataset.productCard;let handle=url;url.indexOf("products/")>0&&(handle=url.split("products/")[1]),handle&&fetch(`/products/${handle}?view=product-card`).then(response=>{if(!response.ok){console.warn(`Product not found: ${handle}`);const slide=el.closest(".swiper-slide");return slide&&slide.remove(),null}return response.text()}).then(html=>{html&&(el.insertAdjacentHTML("beforeend",html),document.querySelectorAll(".variant-image").forEach(image=>{image.addEventListener("mouseenter",handleImageHover),image.addEventListener("click",handleImageClick)}))}).catch(error=>{console.error("Error fetching product card HTML:",error);const slide=el.closest(".swiper-slide");slide&&slide.remove()})})}function capitalize(str){return str.toLowerCase().replace(/\w/,firstLetter=>firstLetter.toUpperCase())}function capitalizeAll(str){return str.split(" ").map(capitalize).join(" ")}
//# sourceMappingURL=/cdn/shop/t/748/assets/dy_slide-show.js.map?v=172340647216074675851735264036
